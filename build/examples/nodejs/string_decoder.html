<!doctype html><html lang=en><head><meta charset=utf-8><title>StringDecoder | Node.js v6.4.0 Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic" rel=stylesheet><link href=assets/style.css rel=stylesheet><link href=assets/sh.css rel=stylesheet><link href=https://nodejs.org/api/string_decoder.html rel=canonical></head><body class="alt apidoc" id=api-section-string_decoder><div class=clearfix id=content><div class=interior id=column2><div class=interior id=intro><a href=/ title="Go back to the home page">Node.js</a></div><ul><li><a href=documentation.html class=nav-documentation>About these Docs</a></li><li><a href=synopsis.html class=nav-synopsis>Usage &amp; Example</a></li></ul><div class=line></div><ul><li><a href=assert.html class=nav-assert>Assertion Testing</a></li><li><a href=buffer.html class=nav-buffer>Buffer</a></li><li><a href=addons.html class=nav-addons>C/C++ Addons</a></li><li><a href=child_process.html class=nav-child_process>Child Processes</a></li><li><a href=cluster.html class=nav-cluster>Cluster</a></li><li><a href=cli.html class=nav-cli>Command Line Options</a></li><li><a href=console.html class=nav-console>Console</a></li><li><a href=crypto.html class=nav-crypto>Crypto</a></li><li><a href=debugger.html class=nav-debugger>Debugger</a></li><li><a href=dns.html class=nav-dns>DNS</a></li><li><a href=domain.html class=nav-domain>Domain</a></li><li><a href=errors.html class=nav-errors>Errors</a></li><li><a href=events.html class=nav-events>Events</a></li><li><a href=fs.html class=nav-fs>File System</a></li><li><a href=globals.html class=nav-globals>Globals</a></li><li><a href=http.html class=nav-http>HTTP</a></li><li><a href=https.html class=nav-https>HTTPS</a></li><li><a href=modules.html class=nav-modules>Modules</a></li><li><a href=net.html class=nav-net>Net</a></li><li><a href=os.html class=nav-os>OS</a></li><li><a href=path.html class=nav-path>Path</a></li><li><a href=process.html class=nav-process>Process</a></li><li><a href=punycode.html class=nav-punycode>Punycode</a></li><li><a href=querystring.html class=nav-querystring>Query Strings</a></li><li><a href=readline.html class=nav-readline>Readline</a></li><li><a href=repl.html class=nav-repl>REPL</a></li><li><a href=stream.html class=nav-stream>Stream</a></li><li><a href=string_decoder.html class="nav-string_decoder active">String Decoder</a></li><li><a href=timers.html class=nav-timers>Timers</a></li><li><a href=tls.html class=nav-tls>TLS/SSL</a></li><li><a href=tty.html class=nav-tty>TTY</a></li><li><a href=dgram.html class=nav-dgram>UDP/Datagram</a></li><li><a href=url.html class=nav-url>URL</a></li><li><a href=util.html class=nav-util>Utilities</a></li><li><a href=v8.html class=nav-v8>V8</a></li><li><a href=vm.html class=nav-vm>VM</a></li><li><a href=zlib.html class=nav-zlib>ZLIB</a></li></ul><div class=line></div><ul><li><a href=https://github.com/nodejs/node class=nav-https-github-com-nodejs-node>GitHub Repo &amp; Issue Tracker</a></li><li><a href=http://groups.google.com/group/nodejs class=nav-http-groups-google-com-group-nodejs>Mailing List</a></li></ul></div><div class=interior id=column1 data-id=string_decoder><header><h1>Node.js v6.4.0 Documentation</h1><div id=gtoc><p><a href=index.html name=toc>Index</a> | <a href=all.html>View on single page</a> | <a href=string_decoder.json>View as JSON</a></p></div><hr></header><div id=toc><h2>Table of Contents</h2><ul><li><a href=#string_decoder_stringdecoder>StringDecoder</a><ul><li><a href=#string_decoder_class_new_stringdecoder_encoding>Class: new StringDecoder([encoding])</a><ul><li><a href=#string_decoder_stringdecoder_end_buffer>stringDecoder.end([buffer])</a></li><li><a href=#string_decoder_stringdecoder_write_buffer>stringDecoder.write(buffer)</a></li></ul></li></ul></li></ul></div><div id=apicontent><h1>StringDecoder<span><a href=#string_decoder_stringdecoder class=mark id=string_decoder_stringdecoder>#</a></span></h1><pre class="api_stability api_stability_2">Stability: 2 - Stable</pre><p>The <code>string_decoder</code> module provides an API for decoding <code>Buffer</code> objects into strings in a manner that preserves encoded multi-byte UTF-8 and UTF-16 characters. It can be accessed using:</p><pre><code class=lang-js>const StringDecoder = require(&#39;string_decoder&#39;).StringDecoder;
</code></pre><p>The following example shows the basic use of the <code>StringDecoder</code> class.</p><pre><code class=lang-js>const StringDecoder = require(&#39;string_decoder&#39;).StringDecoder;
const decoder = new StringDecoder(&#39;utf8&#39;);

const cent = Buffer.from([0xC2, 0xA2]);
console.log(decoder.write(cent));

const euro = Buffer.from([0xE2, 0x82, 0xAC]);
console.log(decoder.write(euro));
</code></pre><p>When a <code>Buffer</code> instance is written to the <code>StringDecoder</code> instance, an internal buffer is used to ensure that the decoded string does not contain any incomplete multibyte characters. These are held in the buffer until the next call to <code>stringDecoder.write()</code> or until <code>stringDecoder.end()</code> is called.</p><p>In the following example, the three UTF-8 encoded bytes of the European Euro symbol (<code>â‚¬</code>) are written over three separate operations:</p><pre><code class=lang-js>const StringDecoder = require(&#39;string_decoder&#39;).StringDecoder;
const decoder = new StringDecoder(&#39;utf8&#39;);

decoder.write(Buffer.from([0xE2]));
decoder.write(Buffer.from([0x82]));
console.log(decoder.end(Buffer.from([0xAC])));
</code></pre><h2>Class: new StringDecoder([encoding])<span><a href=#string_decoder_class_new_stringdecoder_encoding class=mark id=string_decoder_class_new_stringdecoder_encoding>#</a></span></h2><div class=api_metadata><span>Added in: v0.1.99</span></div><ul><li><code>encoding</code> <span class=type>&lt;string&gt;</span> The character encoding the <code>StringDecoder</code> will use. Defaults to <code>&#39;utf8&#39;</code>.</li></ul><p>Creates a new <code>StringDecoder</code> instance.</p><h3>stringDecoder.end([buffer])<span><a href=#string_decoder_stringdecoder_end_buffer class=mark id=string_decoder_stringdecoder_end_buffer>#</a></span></h3><div class=api_metadata><span>Added in: v0.9.3</span></div><ul><li><code>buffer</code> <a href=buffer.html#buffer_class_buffer class=type>&lt;Buffer&gt;</a> A <code>Buffer</code> containing the bytes to decode.</li></ul><p>Returns any remaining input stored in the internal buffer as a string. Bytes representing incomplete UTF-8 and UTF-16 characters will be replaced with substitution characters appropriate for the character encoding.</p><p>If the <code>buffer</code> argument is provided, one final call to <code>stringDecoder.write()</code> is performed before returning the remaining input.</p><h3>stringDecoder.write(buffer)<span><a href=#string_decoder_stringdecoder_write_buffer class=mark id=string_decoder_stringdecoder_write_buffer>#</a></span></h3><div class=api_metadata><span>Added in: v0.1.99</span></div><ul><li><code>buffer</code> <a href=buffer.html#buffer_class_buffer class=type>&lt;Buffer&gt;</a> A <code>Buffer</code> containing the bytes to decode.</li></ul><p>Returns a decoded string, ensuring that any incomplete multibyte characters at the end of the <code>Buffer</code> are omitted from the returned string and stored in an internal buffer for the next call to <code>stringDecoder.write()</code> or <code>stringDecoder.end()</code>.</p></div></div></div><script src=assets/sh_main.js></script><script src=assets/sh_javascript.min.js></script><script>highlight(void 0,void 0,"pre")</script></body></html>