<!DOCTYPE html><!--[if IE]><![endif]--><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><title>Context | React</title><meta content="width=device-width" name=viewport><meta content="Context | React" property=og:title><meta content=website property=og:type><meta content=https://facebook.github.io/fastastic/examples/react/docs/context.html property=og:url><meta content=https://facebook.github.io/fastastic/examples/react/img/logo_og.png property=og:image><meta content="A JavaScript library for building user interfaces" property=og:description><meta content=623268441017527 property=fb:app_id><link href=/fastastic/examples/react/favicon.ico rel="shortcut icon"><link href=https://facebook.github.io/fastastic/examples/react/feed.xml rel=alternate title=React type=application/rss+xml><link href=https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css rel=stylesheet><link href=/fastastic/examples/react/css/syntax.css rel=stylesheet><link href=/fastastic/examples/react/css/codemirror.css rel=stylesheet><link href=/fastastic/examples/react/css/react.css rel=stylesheet><script src=//use.typekit.net/vqa1hcx.js></script><script>try{Typekit.load()}catch(t){}</script><!--[if lte IE 8]>
  <script src="/fastastic/examples/react/js/html5shiv.min.js"></script>
  <script src="/fastastic/examples/react/js/es5-shim.min.js"></script>
  <script src="/fastastic/examples/react/js/es5-sham.min.js"></script>
  <![endif]--><script src=https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js></script><script src=/fastastic/examples/react/js/codemirror.js></script><script src=/fastastic/examples/react/js/javascript.js></script><script src=/fastastic/examples/react/js/xml.js></script><script src=/fastastic/examples/react/js/jsx.js></script><script src=/fastastic/examples/react/js/react.js></script><script src=/fastastic/examples/react/js/react-dom.js></script><script src=/fastastic/examples/react/js/babel-browser.min.js></script><script src=/fastastic/examples/react/js/live_editor.js></script></head><body><div class=container><div class=nav-main><div class=wrap><a href=/fastastic/examples/react/index.html class=nav-home><img class=nav-logo height=36 src=/fastastic/examples/react/img/logo.svg width=36> React</a><ul class="nav-site nav-site-internal"><li><a href=/fastastic/examples/react/docs/getting-started.html class=active>Docs</a></li><li><a href=/fastastic/examples/react/support.html>Support</a></li><li><a href=/fastastic/examples/react/downloads.html>Download</a></li><li><a href=/fastastic/examples/react/blog/ >Blog</a></li><li><input id=algolia-doc-search placeholder="Search docs..." type=text></li></ul><ul class="nav-site nav-site-external"><li><a href=https://github.com/facebook/react>GitHub</a></li><li><a href=https://facebook.github.io/react-native/ >React Native</a></li></ul></div></div><section class="wrap content documentationContent"><div class=nav-docs><!-- Docs Nav --><div class=nav-docs-section><h3>Quick Start</h3><ul><li><a href=/fastastic/examples/react/docs/getting-started.html>Getting Started</a></li><li><a href=/fastastic/examples/react/docs/tutorial.html>Tutorial</a></li><li><a href=/fastastic/examples/react/docs/thinking-in-react.html>Thinking in React</a></li></ul></div><div class=nav-docs-section><h3>Community Resources</h3><ul><li><a href=/fastastic/examples/react/docs/conferences.html>Conferences</a></li><li><a href=/fastastic/examples/react/docs/videos.html>Videos</a></li><li><a href=https://github.com/facebook/fastastic/examples/react/wiki/Complementary-Tools class=external>Complementary Tools</a></li><li><a href=https://github.com/facebook/fastastic/examples/react/wiki/Examples class=external>Examples</a></li></ul></div><div class=nav-docs-section><h3>Guides</h3><ul><li><a href=/fastastic/examples/react/docs/why-react.html>Why React?</a></li><li><a href=/fastastic/examples/react/docs/displaying-data.html>Displaying Data</a><ul><li><a href=/fastastic/examples/react/docs/jsx-in-depth.html>JSX in Depth</a></li><li><a href=/fastastic/examples/react/docs/jsx-spread.html>JSX Spread Attributes</a></li><li><a href=/fastastic/examples/react/docs/jsx-gotchas.html>JSX Gotchas</a></li></ul></li><li><a href=/fastastic/examples/react/docs/interactivity-and-dynamic-uis.html>Interactivity and Dynamic UIs</a></li><li><a href=/fastastic/examples/react/docs/multiple-components.html>Multiple Components</a></li><li><a href=/fastastic/examples/react/docs/reusable-components.html>Reusable Components</a></li><li><a href=/fastastic/examples/react/docs/transferring-props.html>Transferring Props</a></li><li><a href=/fastastic/examples/react/docs/forms.html>Forms</a></li><li><a href=/fastastic/examples/react/docs/working-with-the-browser.html>Working With the Browser</a><ul><li><a href=/fastastic/examples/react/docs/more-about-refs.html>Refs to Components</a></li></ul></li><li><a href=/fastastic/examples/react/docs/tooling-integration.html>Tooling Integration</a><ul><li><a href=/fastastic/examples/react/docs/language-tooling.html>Language Tooling</a></li><li><a href=/fastastic/examples/react/docs/package-management.html>Package Management</a></li><li><a href=/fastastic/examples/react/docs/environments.html>Server-side Environments</a></li></ul></li><li><a href=/fastastic/examples/react/docs/addons.html>Add-Ons</a><ul><li><a href=/fastastic/examples/react/docs/animation.html>Animation</a></li><li><a href=/fastastic/examples/react/docs/two-way-binding-helpers.html>Two-Way Binding Helpers</a></li><li><a href=/fastastic/examples/react/docs/test-utils.html>Test Utilities</a></li><li><a href=/fastastic/examples/react/docs/clone-with-props.html>Cloning Elements</a></li><li><a href=/fastastic/examples/react/docs/create-fragment.html>Keyed Fragments</a></li><li><a href=/fastastic/examples/react/docs/update.html>Immutability Helpers</a></li><li><a href=/fastastic/examples/react/docs/pure-render-mixin.html>PureRenderMixin</a></li><li><a href=/fastastic/examples/react/docs/perf.html>Performance Tools</a></li><li><a href=/fastastic/examples/react/docs/shallow-compare.html>Shallow Compare</a></li></ul></li><li><a href=/fastastic/examples/react/docs/advanced-performance.html>Advanced Performance</a></li><li><a href=/fastastic/examples/react/docs/context.html class=active>Context</a></li></ul></div><div class=nav-docs-section><h3>Reference</h3><ul><li><a href=/fastastic/examples/react/docs/top-level-api.html>Top-Level API</a></li><li><a href=/fastastic/examples/react/docs/component-api.html>Component API</a></li><li><a href=/fastastic/examples/react/docs/component-specs.html>Component Specs and Lifecycle</a></li><li><a href=/fastastic/examples/react/docs/tags-and-attributes.html>Supported Tags and Attributes</a></li><li><a href=/fastastic/examples/react/docs/events.html>Event System</a></li><li><a href=/fastastic/examples/react/docs/dom-differences.html>DOM Differences</a></li><li><a href=/fastastic/examples/react/docs/special-non-dom-attributes.html>Special Non-DOM Attributes</a></li><li><a href=/fastastic/examples/react/docs/reconciliation.html>Reconciliation</a></li><li><a href=/fastastic/examples/react/docs/webcomponents.html>Web Components</a></li><li><a href=/fastastic/examples/react/docs/glossary.html>React (Virtual) DOM Terminology</a></li></ul></div><!-- Tips Nav --><div class=nav-docs-section><h3>Tips</h3><ul><li><a href=/fastastic/examples/react/tips/introduction.html>Introduction</a></li><li><a href=/fastastic/examples/react/tips/inline-styles.html>Inline Styles</a></li><li><a href=/fastastic/examples/react/tips/if-else-in-JSX.html>If-Else in JSX</a></li><li><a href=/fastastic/examples/react/tips/self-closing-tag.html>Self-Closing Tag</a></li><li><a href=/fastastic/examples/react/tips/maximum-number-of-jsx-root-nodes.html>Maximum Number of JSX Root Nodes</a></li><li><a href=/fastastic/examples/react/tips/style-props-value-px.html>Shorthand for Specifying Pixel Values in style props</a></li><li><a href=/fastastic/examples/react/tips/children-props-type.html>Type of the Children props</a></li><li><a href=/fastastic/examples/react/tips/controlled-input-null-value.html>Value of null for Controlled Input</a></li><li><a href=/fastastic/examples/react/tips/componentWillReceiveProps-not-triggered-after-mounting.html>componentWillReceiveProps Not Triggered After Mounting</a></li><li><a href=/fastastic/examples/react/tips/props-in-getInitialState-as-anti-pattern.html>Props in getInitialState Is an Anti-Pattern</a></li><li><a href=/fastastic/examples/react/tips/dom-event-listeners.html>DOM Event Listeners in a Component</a></li><li><a href=/fastastic/examples/react/tips/initial-ajax.html>Load Initial Data via AJAX</a></li><li><a href=/fastastic/examples/react/tips/false-in-jsx.html>False in JSX</a></li><li><a href=/fastastic/examples/react/tips/communicate-between-components.html>Communicate Between Components</a></li><li><a href=/fastastic/examples/react/tips/expose-component-functions.html>Expose Component Functions</a></li><li><a href=/fastastic/examples/react/tips/children-undefined.html>this.props.children undefined</a></li><li><a href=/fastastic/examples/react/tips/use-react-with-other-libraries.html>Use React with Other Libraries</a></li><li><a href=/fastastic/examples/react/tips/dangerously-set-inner-html.html>Dangerously Set innerHTML</a></li></ul></div><!-- Contributing Nav --><div class=nav-docs-section><h3>Contributing</h3><ul><li><a href=/fastastic/examples/react/contributing/design-principles.html>Design Principles</a></li></ul></div></div><div class=inner-content><a href=https://github.com/facebook/fastastic/examples/react/tree/master/docs/docs/12-context.md class=edit-page-link target=_blank>Edit on GitHub</a><h1>Context</h1><div class=subHeader></div><p>One of React&#39;s biggest strengths is that it&#39;s easy to track the flow of data through your React components. When you look at a component, you can easily see exactly which props are being passed in which makes your apps easy to reason about.</p><p>Occasionally, you want to pass data through the component tree without having to pass the props down manually at every level. React&#39;s &quot;context&quot; feature lets you do this.</p><blockquote><p>Note:</p><p>Context is an advanced and experimental feature. The API is likely to change in future releases.</p><p>Most applications will never need to use context. Especially if you are just getting started with React, you likely do not want to use context. Using context will make your code harder to understand because it makes the data flow less clear. It is similar to using global variables to pass state through your application.</p><p><strong>If you have to use context, use it sparingly.</strong></p><p>Regardless of whether you&#39;re building an application or a library, try to isolate your use of context to a small area and avoid using the context API directly when possible so that it&#39;s easier to upgrade when the API changes.</p></blockquote><h2><a class=anchor name=passing-info-automatically-through-a-tree></a>Passing info automatically through a tree <a href=#passing-info-automatically-through-a-tree class=hash-link>#</a></h2><p>Suppose you have a structure like:</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kr>class</span> <span class=nx>Button</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span><span class=nx>background</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>color</span><span class=p>}}</span><span class=o>&gt;</span>
        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>}</span>
      <span class=o>&lt;</span><span class=err>/button&gt;</span>
    <span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kr>class</span> <span class=nx>Message</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
      <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span> <span class=o>&lt;</span><span class=nx>Button</span> <span class=nx>color</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>color</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/Button&gt;</span>
      <span class=o>&lt;</span><span class=err>/div&gt;</span>
    <span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kr>class</span> <span class=nx>MessageList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=nx>color</span> <span class=o>=</span> <span class=s2>&quot;purple&quot;</span><span class=p>;</span>
    <span class=kr>const</span> <span class=nx>children</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>messages</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>message</span><span class=p>)</span> <span class=o>=&gt;</span>
      <span class=o>&lt;</span><span class=nx>Message</span> <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span> <span class=nx>color</span><span class=o>=</span><span class=p>{</span><span class=nx>color</span><span class=p>}</span> <span class=o>/&gt;</span>
    <span class=p>);</span>
    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>children</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/div&gt;;</span>
  <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>In this example, we manually thread through a <code>color</code> prop in order to style the <code>Button</code> and <code>Message</code> components appropriately. Theming is a good example of when you might want an entire subtree to have access to some piece of information (a color). Using context, we can pass this through the tree automatically:</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kr>class</span> <span class=nx>Button</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
<span class=hll>      <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span><span class=nx>background</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>context</span><span class=p>.</span><span class=nx>color</span><span class=p>}}</span><span class=o>&gt;</span>
</span>        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>}</span>
      <span class=o>&lt;</span><span class=err>/button&gt;</span>
    <span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=hll><span class=nx>Button</span><span class=p>.</span><span class=nx>contextTypes</span> <span class=o>=</span> <span class=p>{</span>
</span><span class=hll>  <span class=nx>color</span><span class=o>:</span> <span class=nx>React</span><span class=p>.</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
</span><span class=hll><span class=p>};</span>
</span>
<span class=kr>class</span> <span class=nx>Message</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>(</span>
      <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=hll>        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span> <span class=o>&lt;</span><span class=nx>Button</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/Button&gt;</span>
</span>      <span class=o>&lt;</span><span class=err>/div&gt;</span>
    <span class=p>);</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=kr>class</span> <span class=nx>MessageList</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
<span class=hll>  <span class=nx>getChildContext</span><span class=p>()</span> <span class=p>{</span>
</span><span class=hll>    <span class=k>return</span> <span class=p>{</span><span class=nx>color</span><span class=o>:</span> <span class=s2>&quot;purple&quot;</span><span class=p>};</span>
</span><span class=hll>  <span class=p>}</span>
</span>
  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=nx>children</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>messages</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>message</span><span class=p>)</span> <span class=o>=&gt;</span>
      <span class=o>&lt;</span><span class=nx>Message</span> <span class=nx>text</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span> <span class=o>/&gt;</span>
    <span class=p>);</span>
    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>children</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/div&gt;;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=hll><span class=nx>MessageList</span><span class=p>.</span><span class=nx>childContextTypes</span> <span class=o>=</span> <span class=p>{</span>
</span><span class=hll>  <span class=nx>color</span><span class=o>:</span> <span class=nx>React</span><span class=p>.</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
</span><span class=hll><span class=p>};</span>
</span></code></pre></div><p>By adding <code>childContextTypes</code> and <code>getChildContext</code> to <code>MessageList</code> (the context provider), React passes the information down automatically and any component in the subtree (in this case, <code>Button</code>) can access it by defining <code>contextTypes</code>.</p><p>If <code>contextTypes</code> is not defined, then <code>context</code> will be an empty object.</p><h2><a class=anchor name=parent-child-coupling></a>Parent-child coupling <a href=#parent-child-coupling class=hash-link>#</a></h2><p>Context can also let you build an API such as:</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=o>&lt;</span><span class=nx>Menu</span><span class=o>&gt;</span>
  <span class=o>&lt;</span><span class=nx>MenuItem</span><span class=o>&gt;</span><span class=nx>aubergine</span><span class=o>&lt;</span><span class=err>/MenuItem&gt;</span>
  <span class=o>&lt;</span><span class=nx>MenuItem</span><span class=o>&gt;</span><span class=nx>butternut</span> <span class=nx>squash</span><span class=o>&lt;</span><span class=err>/MenuItem&gt;</span>
  <span class=o>&lt;</span><span class=nx>MenuItem</span><span class=o>&gt;</span><span class=nx>clementine</span><span class=o>&lt;</span><span class=err>/MenuItem&gt;</span>
<span class=o>&lt;</span><span class=err>/Menu&gt;</span>
</code></pre></div><p>By passing down the relevant info in the <code>Menu</code> component, each <code>MenuItem</code> can communicate back to the containing <code>Menu</code> component.</p><p><strong>Before you build components with this API, consider if there are cleaner alternatives.</strong> We&#39;re fond of simply passing the items as an array in cases like this:</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=o>&lt;</span><span class=nx>Menu</span> <span class=nx>items</span><span class=o>=</span><span class=p>{[</span><span class=s1>&#39;aubergine&#39;</span><span class=p>,</span> <span class=s1>&#39;butternut squash&#39;</span><span class=p>,</span> <span class=s1>&#39;clementine&#39;</span><span class=p>]}</span> <span class=o>/&gt;</span>
</code></pre></div><p>Recall that you can also pass entire React components in props if you&#39;d like to.</p><h2><a class=anchor name=referencing-context-in-lifecycle-methods></a>Referencing context in lifecycle methods <a href=#referencing-context-in-lifecycle-methods class=hash-link>#</a></h2><p>If <code>contextTypes</code> is defined within a component, the following lifecycle methods will receive an additional parameter, the <code>context</code> object:</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=k>void</span> <span class=nx>componentWillReceiveProps</span><span class=p>(</span>
  <span class=nx>object</span> <span class=nx>nextProps</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>nextContext</span>
<span class=p>)</span>

<span class=kr>boolean</span> <span class=nx>shouldComponentUpdate</span><span class=p>(</span>
  <span class=nx>object</span> <span class=nx>nextProps</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>nextState</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>nextContext</span>
<span class=p>)</span>

<span class=k>void</span> <span class=nx>componentWillUpdate</span><span class=p>(</span>
  <span class=nx>object</span> <span class=nx>nextProps</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>nextState</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>nextContext</span>
<span class=p>)</span>

<span class=k>void</span> <span class=nx>componentDidUpdate</span><span class=p>(</span>
  <span class=nx>object</span> <span class=nx>prevProps</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>prevState</span><span class=p>,</span> <span class=nx>object</span> <span class=nx>prevContext</span>
<span class=p>)</span>
</code></pre></div><h2><a class=anchor name=referencing-context-in-stateless-functional-components></a>Referencing context in stateless functional components <a href=#referencing-context-in-stateless-functional-components class=hash-link>#</a></h2><p>Stateless functional components are also able to reference <code>context</code> if <code>contextTypes</code> is defined as a property of the function. The following code shows the <code>Button</code> component above written as a stateless functional component.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>Button</span> <span class=o>=</span> <span class=p>({</span><span class=nx>children</span><span class=p>},</span> <span class=nx>context</span><span class=p>)</span> <span class=o>=&gt;</span>
  <span class=o>&lt;</span><span class=nx>button</span> <span class=nx>style</span><span class=o>=</span><span class=p>{{</span><span class=nx>background</span><span class=o>:</span> <span class=nx>context</span><span class=p>.</span><span class=nx>color</span><span class=p>}}</span><span class=o>&gt;</span>
    <span class=p>{</span><span class=nx>children</span><span class=p>}</span>
  <span class=o>&lt;</span><span class=err>/button&gt;;</span>

<span class=nx>Button</span><span class=p>.</span><span class=nx>contextTypes</span> <span class=o>=</span> <span class=p>{</span><span class=nx>color</span><span class=o>:</span> <span class=nx>React</span><span class=p>.</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>};</span>
</code></pre></div><h2><a class=anchor name=updating-context></a>Updating context <a href=#updating-context class=hash-link>#</a></h2><p>The <code>getChildContext</code> function will be called when the state or props changes. In order to update data in the context, trigger a local state update with <code>this.setState</code>. This will trigger a new context and changes will be received by the children.</p><div class=highlight><pre><code class=language-javascript data-lang=javascript><span class=kr>class</span> <span class=nx>MediaQuery</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>type</span><span class=o>:</span><span class=s1>&#39;desktop&#39;</span><span class=p>};</span>
  <span class=p>}</span>

  <span class=nx>getChildContext</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=p>{</span><span class=nx>type</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>type</span><span class=p>};</span>
  <span class=p>}</span>

  <span class=nx>componentDidMount</span><span class=p>()</span> <span class=p>{</span>
    <span class=kr>const</span> <span class=nx>checkMediaQuery</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=nx>type</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>matchMedia</span><span class=p>(</span><span class=s2>&quot;(min-width: 1025px)&quot;</span><span class=p>).</span><span class=nx>matches</span> <span class=o>?</span> <span class=s1>&#39;desktop&#39;</span> <span class=o>:</span> <span class=s1>&#39;mobile&#39;</span><span class=p>;</span>
      <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>!==</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>type</span><span class=p>});</span>
      <span class=p>}</span>
    <span class=p>};</span>

    <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>checkMediaQuery</span><span class=p>);</span>
    <span class=nx>checkMediaQuery</span><span class=p>();</span>
  <span class=p>}</span>

  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>;</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=nx>MediaQuery</span><span class=p>.</span><span class=nx>childContextTypes</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>type</span><span class=o>:</span> <span class=nx>React</span><span class=p>.</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
<span class=p>};</span>
</code></pre></div><h2><a class=anchor name=when-not-to-use-context></a>When not to use context <a href=#when-not-to-use-context class=hash-link>#</a></h2><p>Just as global variables are best avoided when writing clear code, you should avoid using context in most cases. In particular, think twice before using it to &quot;save typing&quot; and using it instead of passing explicit props.</p><p>The best use cases for context are for implicitly passing down the logged-in user, the current language, or theme information. All of these might otherwise be true globals, but context lets you scope them to a single React subtree.</p><p>Do not use context to pass your model data through components. Threading your data through the tree explicitly is much easier to understand. Using context makes your components more coupled and less reusable, because they behave differently depending on where they&#39;re rendered.</p><h2><a class=anchor name=known-limitations></a>Known limitations <a href=#known-limitations class=hash-link>#</a></h2><p>If a context value provided by a component changes, descendants that use that value won&#39;t update if an intermediate parent returns <code>false</code> from <code>shouldComponentUpdate</code>. See issue <a href=https://github.com/facebook/fastastic/examples/react/issues/2517>#2517</a> for more details.</p><div class=docs-prevnext><a href=/fastastic/examples/react/docs/advanced-performance.html class=docs-prev>&larr; Prev</a></div></div></section><footer class=wrap><div class=left>A Facebook &amp; Instagram collaboration.<br><a href=/fastastic/examples/react/acknowledgements.html>Acknowledgements</a></div><div class=right>&copy; 2013&ndash;2016 Facebook Inc.<br>Documentation licensed under <a href=https://creativecommons.org/licenses/by/4.0/ >CC BY 4.0</a>.</div></footer></div><div id=fb-root></div><script>!function(e,t,n,a,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(n),s=t.getElementsByTagName(n)[0],o.async=1,o.src=a,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-41298772-1","facebook.github.io"),ga("send","pageview"),!function(e,t,n){var a,c=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="https://platform.twitter.com/widgets.js",c.parentNode.insertBefore(a,c))}(document,"script","twitter-wjs"),function(e,t,n){var a,c=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=623268441017527",c.parentNode.insertBefore(a,c))}(document,"script","facebook-jssdk"),docsearch({apiKey:"36221914cce388c46d0420343e0bb32e",indexName:"react",inputSelector:"#algolia-doc-search"})</script></body></html>